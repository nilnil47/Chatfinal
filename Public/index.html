<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css"
      integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk="
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="css/style.css" />
    <title>NegoFlict App</title>
  </head>
  <body >
    
    <div style="display: flex; justify-content: center">
      
    </div>
    <div align="center"class="join-container" >
      <header class="join-header">
        <h1 ><i><img src="https://scontent.ftlv5-1.fna.fbcdn.net/v/t1.6435-9/210055216_4275416162479634_2684092467103518465_n.jpg?_nc_cat=105&ccb=1-3&_nc_sid=730e14&_nc_ohc=RVqKSF-u2dkAX_GPbH1&_nc_ht=scontent.ftlv5-1.fna&oh=385de3e9721f0c2da5d75cd096242efc&oe=60E5E75B"
          width="80" height="90" alt="webmaster logo" /></i> Welcome to NegoFlict</h1>
     
      </header>
      <main class="join-main">
        <script>
          function submit(){
            const yourUrl = '/api/login'
            const object = {
              userName:document.getElementById("username").value,
              password:document.getElementById("password").value,
            }
            
            //save id user whem login the web
            localStorage.setItem('username',object.userName);
            
  
  
            var xhr = new XMLHttpRequest();
            xhr.onload = function(){
            if (this.readyState === XMLHttpRequest.DONE && this.status === 200) {
              
              
              if(xhr.responseText==='{"userType":"mediator"}')
            {
              alert("Welcome") ;
              window.location.href="mediatorPage.html";            
            }
            else if(xhr.responseText==='{"userType":"negotiator"}')
            {
              alert("Welcome") ;
              window.location.href="negotiatorPage.html";            
            }
            else if(xhr.responseText==='{"userType":"manager"}')
            {
              alert("Welcome") ;
              window.location.href="managerPage.html";            
            }
            else if(xhr.responseText==="no"){
              alert("Wrong password, try again");
            }
          }


            }
            xhr.open("POST", yourUrl, true);
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.send(JSON.stringify(object));


                    }
          </script>
        <center><h1 style="color:black">Solution Focused Negotiation</h1> </center> <br>

          <div class="form-control">
            <label for="username">Username</label>
            <input
              type="text"
              name="username"
              id="username"
              placeholder="Enter username..."
              required
            />
          </div>
          <div class="form-control">
            <label for="password">Password</label>
            <input
              type="text"
              name="password"
              id="password"
              placeholder="Enter password..."
              required
            />
          </div>
          <div>
              <a href="negotiatorPage.html"></a>
                <button type="submit" onclick="submit()" class="btn">Login</button>

          <div class="container signin">
            
            <p><a href="restPassword.html" class="link">Forgot your password? </a></p>
          </div>
     
        <div class="bottom_part">
          <strong class="text_strong"> New? Register here! </strong>
          <a href="registration.html">
            <button type="submit" class="btn">Register</button>
          </a>
          <br>
          <div class="container signin">
            
            <p><a href="connectUs.html" class="link">Contact us </a></p> <br><br><br>

            <p><a href="https://negoflict.com/home" class="link">Come visit our website </a></p>


          </div>
      
        </div>
      </main>
    </div>
  </body>
</html>
