<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css"
      integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk="
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="css/style.css" />
    <title>Enter Negotiation</title>
  </head>
  <body>
    <div style="display: flex; justify-content: center">
      
    </div>
    <div class="join-container">
      <header class="join-header">
        <h1 ><i><img src="https://scontent.ftlv5-1.fna.fbcdn.net/v/t1.6435-9/210055216_4275416162479634_2684092467103518465_n.jpg?_nc_cat=105&ccb=1-3&_nc_sid=730e14&_nc_ohc=RVqKSF-u2dkAX_GPbH1&_nc_ht=scontent.ftlv5-1.fna&oh=385de3e9721f0c2da5d75cd096242efc&oe=60E5E75B"
        width="80" height="90" alt="webmaster logo" /></i>Choose your negotiation </h1>
      </header>


      <style>
        /* When it is unvisited link */
        a:link {
        color: rgb(0, 0, 0);
        }
        
        /* When it is visited link */
        a:visited {
        color: rgb(0, 0, 0);
        }
        
        /* When you mouse over link */
        a:hover {
        color: red;
        }
        
        /* When it is selected link */
        a:active {
        color: blue;
        }
        </style>
        </head>

      
        
     
       <center> <h1 id="data" style="background-color: rgb(255, 255, 255);"></center>
      

        <script>
          
          const userId = localStorage.getItem('id')
     
            console.log(userId)
          const yourUrl = '/api/viewnegos/'+userId;
          var xhr = new XMLHttpRequest();
          xhr.open("GET", yourUrl, true);
          xhr.setRequestHeader('Content-Type', 'application/json');
          xhr.send(JSON.stringify(userId));
          xhr.onreadystatechange=function(){
            if(this.readyState == 4 && this.status==200){
              var strHtml='';
              var myarray=((JSON.parse(this.responseText)));
              myarray.forEach(obj=>{
              const {negoid,title}=obj;
              console.log(title);
              strHtml += `<div><div><a href=./chat.html?negoid=${negoid}&title=${title}>${title}</a></div></div>`});
              //console.log(title);
              }
              console.log(strHtml);
            
            
              document.getElementById("data").innerHTML=strHtml;
            };

        </script>
        
    

    
  
        </div>
      </main>
    </div>
  </body>
  <center> <a href="index.html">
    <button>Logout</button></a></center>
</html>
